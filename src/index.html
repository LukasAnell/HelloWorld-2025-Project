<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Reviewer</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

    <style>
        /* ===== GLOBAL STYLES & THEME ===== */
        :root {
            --primary-color: #66D2FF;
            --light-bg: #DFF6FF;
            --alt-bg: #E8FBFF;
            --divider-color: #F2FDFF;
            --hover-color: #5bc8f9;
            --button-color: #66D2FF;
            --text-secondary: #6699AA;
            --text-primary: #333;
            --font-family: 'Roboto', sans-serif;
        }

        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

        body {
            font-family: var(--font-family);
            margin: 0;
            background-color: var(--light-bg);
            color: var(--text-primary);
            overflow: hidden; /* Prevent scrolling during transitions */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        /* Helper class for hiding elements */
        .hidden {
            display: none !important;
        }

        /* Fade transition effect */
        .fade {
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
        }
        .fade-out {
            opacity: 0;
        }

        /* ===== INTRO SCREEN ===== */
        #intro-screen {
            background-color: #f0f0f0;
            width: 800px;
            height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        #intro-screen h1 {
            font-size: 26px;
            font-weight: bold;
            margin: 10px 0 20px;
        }

        #intro-screen p {
            font-size: 14px;
            line-height: 1.6;
            max-width: 700px;
        }

        #intro-screen button {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            background: none;
            border: none;
            cursor: pointer;
            padding: 20px;
            margin-top: 20px;
        }

        #intro-screen button:hover {
            color: #000;
        }

        /* ===== MAIN APP & PDF VIEWER ===== */
        .app-container {
            width: 950px;
            height: 650px;
            min-width: 850px;
            min-height: 600px;
            background-color: var(--light-bg);
            display: flex;
            flex-direction: column;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Header */
        .app-header {
            padding: 15px;
            text-align: center;
        }
        .app-header h1 {
            font-size: 22px;
            font-weight: bold;
            color: var(--primary-color);
            margin: 5px 0;
        }
        .app-header p {
            font-size: 12px;
            color: var(--text-secondary);
            margin: 0;
            line-height: 1.5;
        }

        /* Main Content Area */
        .main-content {
            flex-grow: 1;
            background-color: var(--alt-bg);
            margin: 10px 20px;
            padding: 10px;
            display: flex;
            align-items: stretch;
            border-radius: 6px;
        }

        .upload-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        .separator {
            width: 2px;
            background-color: var(--divider-color);
            margin: 10px 0;
        }

        /* Drag & Drop Area */
        .drop-zone {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            text-align: center;
        }

        .drop-zone.dragover {
            background-color: var(--light-bg);
            border-radius: 8px;
        }

        .drop-zone svg {
            width: 150px;
            height: 150px;
            margin-bottom: 15px;
            pointer-events: none; /* Make SVG non-interactive to clicks */
        }

        .drop-zone h2 {
            font-size: 22px;
            color: var(--primary-color);
            margin: 5px 0;
            pointer-events: none;
        }

        .drop-zone h3, .upload-pane h3 {
             font-size: 16px;
             font-weight: bold;
             color: var(--primary-color);
             margin: 0 0 10px 0;
        }

        .upload-pane p {
            font-size: 11px;
            color: var(--text-secondary);
            margin: 0 0 20px 0;
        }

        .browse-btn {
            font-size: 13px;
            font-weight: bold;
            background-color: var(--button-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 12px 25px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .browse-btn:hover {
            background-color: var(--hover-color);
        }

        /* PDF Viewer */
        #pdf-viewer-screen {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
        }
        #pdf-canvas-container {
            flex-grow: 1;
            overflow-y: auto;
            background-color: var(--alt-bg);
            padding: 20px;
            box-sizing: border-box;
        }
        #pdf-canvas-container canvas {
            display: block;
            margin: 0 auto 15px auto;
            max-width: 100%;
            height: auto;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        #pdf-canvas-container .page-separator {
            height: 5px;
            background-color: var(--divider-color);
            border: none;
            margin: 10px 0;
        }

        .viewer-buttons {
            padding: 10px;
            display: flex;
            justify-content: space-between;
            background-color: var(--light-bg);
            border-top: 1px solid var(--divider-color);
        }

        .viewer-buttons button {
            font-size: 12px;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .viewer-buttons .analyze-btn {
            background-color: var(--button-color);
            color: white;
        }
        .viewer-buttons .analyze-btn:hover {
             background-color: var(--hover-color);
        }

        .viewer-buttons .back-btn {
            background-color: var(--divider-color);
            color: var(--primary-color);
        }
         .viewer-buttons .back-btn:hover {
            background-color: #eefaff;
        }
    </style>
</head>
<body>

    <div id="intro-screen" class="fade">
        <h1 id="intro-header">Welcome to Resume Reviewer!</h1>
        <p id="intro-text-1">Our AI model will apply the highest standards to your resume<br>and help you improve it beyond a basic draft</p>
        <p id="intro-text-2" class="hidden">Did you know? Recruiters spend only 6–9 seconds scanning a resume before making a decision.<br><br>Even before the recruiter sees your resume, it may pass through an Applicant Tracking System (ATS). That’s why we focus on helping your content stand out, making sure your experiences and achievements are highlighted in a way that captures attention.</p>
        <button id="continue-btn">Continue &gt;</button>
    </div>

    <div id="main-app-screen" class="app-container hidden">
        <header class="app-header">
            <h1>Welcome to AI Resume Reviewer</h1>
            <p>
                Upload or drop your resume to: <br>
                ✓ Review formatting  ✓ Highlight strengths <br>
                ✓ Suggest improvements  ✓ Ensure ATS compatibility
            </p>
        </header>
        <main class="main-content">
            <div class="upload-pane">
                <div id="drop-zone" class="drop-zone">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-upload-cloud" color="#66D2FF">
                        <polyline points="16 16 12 12 8 16"></polyline>
                        <line x1="12" y1="12" x2="12" y2="21"></line>
                        <path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path>
                        <polyline points="16 16 12 12 8 16"></polyline>
                    </svg>
                    <h2>Drag and Drop</h2>
                </div>
            </div>
            <div class="separator"></div>
            <div class="upload-pane">
                <h3>Or choose a file</h3>
                <p>Supported: PDF only</p>
                <button id="browse-btn" class="browse-btn">Browse Files</button>
                <input type="file" id="file-input" accept=".pdf" class="hidden">
            </div>
        </main>
    </div>

    <div id="pdf-viewer-screen" class="app-container hidden">
        <main id="pdf-canvas-container"></main>
        <footer class="viewer-buttons">
            <button id="analyze-btn" class="analyze-btn">Analyze This File</button>
            <button id="back-btn" class="back-btn">Back</button>
        </footer>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Element References ---
            const introScreen = document.getElementById('intro-screen');
            const mainAppScreen = document.getElementById('main-app-screen');
            const pdfViewerScreen = document.getElementById('pdf-viewer-screen');
            const continueBtn = document.getElementById('continue-btn');
            const introHeader = document.getElementById('intro-header');
            const introText1 = document.getElementById('intro-text-1');
            const introText2 = document.getElementById('intro-text-2');

            const dropZone = document.getElementById('drop-zone');
            const browseBtn = document.getElementById('browse-btn');
            const fileInput = document.getElementById('file-input');

            const pdfCanvasContainer = document.getElementById('pdf-canvas-container');
            const analyzeBtn = document.getElementById('analyze-btn');
            const backBtn = document.getElementById('back-btn');

            let introState = 0; // 0 for initial screen, 1 for info screen

            // --- Main Application Logic ---

            // Check if the intro has been shown before using localStorage
            if (localStorage.getItem('hasSeenIntro')) {
                showMainApp();
            } else {
                introScreen.classList.remove('hidden');
            }

            // --- Screen Transition Functions ---

            function showIntro() {
                mainAppScreen.classList.add('hidden');
                pdfViewerScreen.classList.add('hidden');
                introScreen.classList.remove('hidden');
                introScreen.classList.remove('fade-out');
            }

            function showMainApp() {
                introScreen.classList.add('hidden');
                pdfViewerScreen.classList.add('hidden');
                mainAppScreen.classList.remove('hidden');
            }

            function showPdfViewer() {
                mainAppScreen.classList.add('hidden');
                pdfViewerScreen.classList.remove('hidden');
            }

            // --- Intro Screen Logic ---

            continueBtn.addEventListener('click', () => {
                continueBtn.disabled = true;

                if (introState === 0) {
                    // Transition from welcome text to info text
                    introText1.classList.add('fade-out');
                    setTimeout(() => {
                        introText1.classList.add('hidden');
                        introText2.classList.remove('hidden');
                        introText2.classList.remove('fade-out');
                        introState = 1;
                        continueBtn.disabled = false;
                    }, 500); // Wait for fade-out to complete
                } else if (introState === 1) {
                    // Fade out the entire intro and show the main app
                    introScreen.classList.add('fade-out');
                    setTimeout(() => {
                        localStorage.setItem('hasSeenIntro', 'true');
                        showMainApp();
                    }, 500);
                }
            });

            // --- File Handling Logic ---

            browseBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) handleFile(file);
            });

            // Drag and Drop
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('dragover');
            });
            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('dragover');
            });
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('dragover');
                const file = e.dataTransfer.files[0];
                if (file) handleFile(file);
            });
             // Also allow dropping anywhere on the pane
            dropZone.parentElement.addEventListener('click', () => fileInput.click());


            function handleFile(file) {
                if (file.type !== 'application/pdf') {
                    alert('Invalid File. Please select or drop a PDF file.');
                    return;
                }
                renderPdf(file);
                showPdfViewer();
            }

            // --- PDF Rendering Logic (using PDF.js) ---

            async function renderPdf(file) {
                // Clear previous PDF content
                pdfCanvasContainer.innerHTML = '';

                // Use a web worker for better performance
                pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js`;

                const fileUrl = URL.createObjectURL(file);
                const pdf = await pdfjsLib.getDocument(fileUrl).promise;

                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const viewport = page.getViewport({ scale: 1.5 });

                    const canvas = document.createElement('canvas');
                    const context = canvas.getContext('2d');
                    canvas.height = viewport.height;
                    canvas.width = viewport.width;

                    await page.render({ canvasContext: context, viewport: viewport }).promise;

                    pdfCanvasContainer.appendChild(canvas);

                    // Add separator between pages
                    if (i < pdf.numPages) {
                        const separator = document.createElement('hr');
                        separator.className = 'page-separator';
                        pdfCanvasContainer.appendChild(separator);
                    }
                }
            }

            // --- PDF Viewer Button Logic ---

            backBtn.addEventListener('click', () => {
                showMainApp();
            });

            analyzeBtn.addEventListener('click', () => {
                alert('Analyzing file...'); // Placeholder for analysis
                showMainApp();
            });
        });
    </script>

</body>
</html>